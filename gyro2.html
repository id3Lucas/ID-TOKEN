<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>NEXUS - Mobile Gyro</title>
<style>
/* --- VARIABLES --- */
:root {
  --card-w: 85vw;
  --card-h: 136vw;
  --radius: 4vw;
  --pad: 5vw;
  --primary: #00f2ff;
  --secondary: #0a1128;
  --accent: #ff0055;
  --text-color: #e0f7fa;
}

@media (min-width: 600px) {
  :root {
    --card-w: 360px;
    --card-h: 580px;
    --radius: 18px;
    --pad: 24px;
  }
}

body {
  font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  margin: 0;
  background: #111;
  background-image: radial-gradient(circle at 50% 50%, #222 0%, #000 100%);
  perspective: 2500px;
  padding: var(--pad);
  overflow: hidden;
}

.id-card-container {
  width: var(--card-w);
  height: var(--card-h);
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1);
  cursor: pointer;
  border-radius: var(--radius);
  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.6), 0 0 15px rgba(0, 242, 255, 0.1); 
  will-change: transform;
}

.id-card-front, .id-card-back {
  width: 100%; height: 100%;
  position: absolute; inset: 0;
  border-radius: var(--radius);
  box-sizing: border-box;
  display: flex; flex-direction: column; justify-content: space-between;
  padding: var(--pad);
  backface-visibility: hidden;
  transform-style: preserve-3d;
  overflow: hidden;
  background: var(--secondary);
  border: 1px solid rgba(0, 242, 255, 0.2);
}

.id-card-front {
  z-index: 2;
  background: 
    linear-gradient(135deg, rgba(10, 17, 40, 0.98) 0%, rgba(5, 5, 10, 1) 100%),
    repeating-linear-gradient(0deg, transparent, transparent 19px, rgba(0, 242, 255, 0.03) 20px),
    repeating-linear-gradient(90deg, transparent, transparent 19px, rgba(0, 242, 255, 0.03) 20px);
  color: var(--text-color);
}

.id-card-back {
  transform: rotateY(180deg);
  z-index: 1;
  background: #080808;
  text-align: center;
}

/* --- HOLOGRAPHIC PATTERN SYSTEM --- */
.hologram-container {
  position: absolute; inset: 0;
  border-radius: var(--radius);
  pointer-events: none;
  z-index: 10;
  overflow: hidden;
  mix-blend-mode: color-dodge;
}

.holo-layer {
  position: absolute;
  inset: -30%; /* Larger area for movement */
  opacity: 0;
  transition: opacity 0.2s ease;
}

/* Patterns */
.pattern-hex {
  background-image: url("data:image/svg+xml,%3Csvg width='40' height='70' viewBox='0 0 40 70' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' stroke='rgba(0, 242, 255, 0.5)' stroke-width='1'%3E%3Cpath d='M20 5 L35 15 L35 35 L20 45 L5 35 L5 15 Z' /%3E%3C/g%3E%3C/svg%3E");
  background-size: 40px 70px; mix-blend-mode: overlay;
}
.pattern-text {
  background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='50' y='50' font-family='Arial' font-weight='bold' font-size='12' fill='rgba(255,255,255,0.3)' text-anchor='middle' transform='rotate(-45 50 50)'%3EID TOKEN%3C/text%3E%3C/svg%3E");
  background-size: 80px 80px; mix-blend-mode: soft-light;
}
.pattern-wave {
  background-image: repeating-radial-gradient(circle at 50% 50%, transparent 0, rgba(255, 255, 255, 0.1) 1px, transparent 4px);
  background-size: 60px 60px; mix-blend-mode: screen;
}
.holo-gradient {
  background: linear-gradient(115deg, transparent 30%, rgba(0, 242, 255, 0.1) 45%, rgba(255, 255, 255, 0.3) 50%, rgba(0, 242, 255, 0.1) 55%, transparent 70%);
  mix-blend-mode: screen; background-size: 200% 200%;
}

/* Content */
.top-row { display: flex; justify-content: space-between; margin-bottom: 20px; }
.logo-area { display: flex; align-items: center; gap: 10px; }
.company-name { font-weight: 700; font-size: 1.1em; letter-spacing: 2px; text-transform: uppercase; color: var(--primary); text-shadow: 0 0 10px rgba(0,242,255,0.4); }

.photo-area { position: relative; width: 140px; height: 140px; margin: 0 auto; border-radius: 50%; padding: 4px; background: linear-gradient(to bottom, var(--primary), transparent); }
.agent-photo { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; border: 2px solid var(--secondary); filter: grayscale(10%) contrast(1.1); background: #333; }

.details { text-align: center; margin-top: 20px; }
.name { font-size: 1.4em; font-weight: 700; margin: 0; text-transform: uppercase; letter-spacing: 1px; }
.rank { color: var(--primary); font-size: 0.9em; font-weight: 600; text-transform: uppercase; margin-bottom: 15px; display: inline-block; border-bottom: 1px solid var(--primary); padding-bottom: 2px; }

.data-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; text-align: left; font-size: 0.85em; background: rgba(255,255,255,0.03); padding: 10px; border-radius: 8px; border-left: 3px solid var(--accent); }
.data-label { color: #6f809b; font-size: 0.8em; display: block; }
.data-val { font-weight: 600; letter-spacing: 0.5px; color: #fff; }
.bottom-id { font-family: 'Courier New', monospace; font-size: 1.2em; text-align: center; margin-top: auto; opacity: 0.7; letter-spacing: 2px; color: var(--primary); }
.mag-stripe { width: 120%; height: 50px; background: #111; margin: -5vw -10% 20px -10%; }
.signature-area { background: #fff; color: #000; width: 80%; height: 40px; margin:auto; display: flex; align-items: center; justify-content: center; font-family: 'Brush Script MT', cursive; font-size: 1.5em; }
.qr-section { display: flex; gap: 15px; align-items: center; text-align: center; margin: 20px; padding: 0 10px; flex-direction: column; }
.qr-code { width:8rem; height:100%; background: #fff; padding: 5px; }
.disclaimer { font-size: 0.65em; color: #666; line-height: 1.4; }

/* Chip Animation */
.chip { pointer-events: auto; }
.chip svg { cursor: pointer; transform-origin: center; animation: wave-chip 2.5s infinite ease-in-out; }
@keyframes wave-chip {
  0%, 100% { transform: rotate(0deg) scale(1); }
  10% { transform: rotate(15deg) scale(1.1); }
  20% { transform: rotate(-10deg) scale(1.1); }
  30% { transform: rotate(5deg) scale(1.1); }
  40% { transform: rotate(-5deg) scale(1.1); }
  50% { transform: rotate(0deg) scale(1); }
}

@media (min-width: 600px) {
  .mag-stripe { width: calc(100% + 50px); margin: -25px -25px 25px -25px; }
  .photo-area { width: 130px; height: 130px; }
  .name { font-size: 1.6em; }
}
</style>
</head>
<body>

<div class="id-card-container">
  <!-- FRONT -->
  <div class="id-card-front">
    <div class="hologram-container">
      <div class="holo-layer pattern-hex"></div>
      <div class="holo-layer pattern-text"></div>
      <div class="holo-layer pattern-wave"></div>
      <div class="holo-layer holo-gradient"></div>
    </div>
    <div class="top-row">
      <div class="logo-area"><span class="company-name">ID Token</span></div>
      <div class="chip">
        <svg fill="var(--primary)" width="40px" height="40px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M16.0527864,12.7236068 C15.1346811,10.8873961 13.8035869,10 12,10 C10.1964131,10 8.86531893,10.8873961 7.9472136,12.7236068 C7.82371897,12.970596 7.52338245,13.0707082 7.2763932,12.9472136 C7.02940395,12.823719 6.92929178,12.5233825 7.0527864,12.2763932 C8.13468107,10.1126039 9.80358687,9 12,9 C14.1964131,9 15.8653189,10.1126039 16.9472136,12.2763932 C17.0707082,12.5233825 16.970596,12.823719 16.7236068,12.9472136 C16.4766175,13.0707082 16.176281,12.970596 16.0527864,12.7236068 Z M16,12 L16,9.5 C16,9.22385763 16.2238576,9 16.5,9 C16.7761424,9 17,9.22385763 17,9.5 L17,12.5 C17,12.7761424 16.7761424,13 16.5,13 L13.5,13 C13.2238576,13 13,12.7761424 13,12.5 C13,12.2238576 13.2238576,12 13.5,12 L16,12 Z M18.5,3 C19.8807119,3 21,4.11928813 21,5.5 C21,5.77614237 20.7761424,6 20.5,6 C20.2238576,6 20,5.77614237 20,5.5 C20,4.67157288 19.3284271,4 18.5,4 C18.2238576,4 18,3.77614237 18,3.5 C18,3.22385763 18.2238576,3 18.5,3 Z M16.5,4 L14.5,4 C14.2238576,4 14,3.77614237 14,3.5 C14,3.22385763 14.2238576,3 14.5,3 L16.5,3 C16.7761424,3 17,3.22385763 17,3.5 C17,3.77614237 16.7761424,4 16.5,4 Z M21,8.5 L21,10.5 C21,10.7761424 20.7761424,11 20.5,11 C20.2238576,11 20,10.7761424 20,10.5 L20,8.5 C20,8.22385763 20.2238576,8 20.5,8 C20.7761424,8 21,8.22385763 21,8.5 Z M21,13.5 L21,15.5 C21,15.7761424 20.7761424,16 20.5,16 C20.2238576,16 20,15.7761424 20,15.5 L20,13.5 C20,13.2238576 20.2238576,13 20.5,13 C20.7761424,13 21,13.2238576 21,13.5 Z M21,18.5 C21,19.8807119 19.8807119,21 18.5,21 C18.2238576,21 18,20.7761424 18,20.5 C18,20.2238576 18.2238576,20 18.5,20 C19.3284271,20 20,19.3284271 20,18.5 C20,18.2238576 20.2238576,18 20.5,18 C20.7761424,18 21,18.2238576 21,18.5 Z M16.5,21 L14.5,21 C14.2238576,21 14,20.7761424 14,20.5 C14,20.2238576 14.2238576,20 14.5,20 L16.5,20 C16.7761424,20 17,20.2238576 17,20.5 C17,20.7761424 16.7761424,21 16.5,21 Z M12,2.5 L12,6.5 C12,6.77614237 11.7761424,7 11.5,7 C11.2238576,7 11,6.77614237 11,6.5 L11,2.5 C11,2.22385763 11.2238576,2 11.5,2 C11.7761424,2 12,2.22385763 12,2.5 Z M12,14.5 L12,21.5 C12,21.7761424 11.7761424,22 11.5,22 C11.2238576,22 11,21.7761424 11,21.5 L11,14.5 C11,14.2238576 11.2238576,14 11.5,14 C11.7761424,14 12,14.2238576 12,14.5 Z M8.5,4 L5.5,4 C4.67157288,4 4,4.67157288 4,5.5 L4,18.5 C4,19.3284271 4.67157288,20 5.5,20 L8.5,20 C8.77614237,20 9,20.2238576 9,20.5 C9,20.7761424 8.77614237,21 8.5,21 L5.5,21 C4.11928813,21 3,19.8807119 3,18.5 L3,5.5 C3,4.11928813 4.11928813,3 5.5,3 L8.5,3 C8.77614237,3 9,3.22385763 9,3.5 C9,3.77614237 8.77614237,4 8.5,4 Z"/>
        </svg>
      </div>
    </div>
    <div class="photo-area">
      <img class="agent-photo" src="https://randomuser.me/api/portraits/women/44.jpg" alt="Agent Photo">
    </div>
    <div class="details">
      <h2 class="name">Sarah Connor</h2>
      <span class="rank">Security Chief / Level 5</span>
      <div class="data-grid">
        <div><span class="data-label">NATIONALITY</span><span class="data-val">American</span></div>
        <div><span class="data-label">GENDER</span><span class="data-val">F</span></div>
        <div><span class="data-label">DATE OF BIRTH</span><span class="data-val">12/2029</span></div>
        <div><span class="data-label">PLACE OF BIRTH</span><span class="data-val">Chicago</span></div>
        <div><span class="data-label">ISSUED</span><span class="data-val">2024/12/31</span></div>
        <div><span class="data-label">EXPIRES</span><span class="data-val" style="color:var(--accent)">2026/12/31</span></div>
      </div>
    </div>
    <div class="bottom-id">&gt;&gt; 8473 9283 1102 &lt;&lt;</div>
  </div>

  <!-- BACK -->
  <div class="id-card-back">
    <div class="hologram-container">
      <div class="holo-layer pattern-hex"></div>
      <div class="holo-layer holo-gradient"></div>
    </div>
    <div class="mag-stripe"></div>
    <div class="qr-section">
      <img class="qr-code" src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=NexusSecurityID89422" alt="QR">
      <div class="disclaimer">
        <strong>BIOSEAL CODE</strong><br>
        BioSeal is the first solution certified by the Otentik Trust Network, ensuring the highest level of reliability and security. Our solution relies on open standards and fits into the Otentik Trust Network, governed by a trust framework and a root trust list.<br><br>
        Our Visible Digital Seal (VDS) technology complies with international standards such as ISO 22376 and ISO 22385, demonstrating our commitment to industry best practices and regulatory compliance.
      </div>
    </div>
    <div class="signature-area">Sarah Connor</div>
    <div style="font-size: 0.7em; color: var(--primary); margin-top: auto; opacity: 0.5;">ID3 TECHNOLOGIES</div>
  </div>
</div>

<script>
const card = document.querySelector('.id-card-container');
const holoLayers = document.querySelectorAll('.holo-layer');

let rotated = false;
let isTicking = false;
// Mouse
let lastX = 0, lastY = 0;
let isTouching = false; 
// Gyro
let gyroDx = 0, gyroDy = 0;
let permissionGranted = false;

// Config
const maxTilt = 15;        
const holoIntensity = 0.4; 

// --- GYROSCOPE ---
function handleOrientation(event) {
  // Gamma (Left/Right)
  const x = event.gamma || 0; 
  // Beta (Front/Back) - offset by 45deg for handheld viewing angle
  const y = event.beta || 0;

  // Normalize & Clamp
  let dx = x / 30;
  if(dx > 1) dx = 1; if(dx < -1) dx = -1;

  let dy = (y - 45) / 30;
  if(dy > 1) dy = 1; if(dy < -1) dy = -1;

  // Smoothing
  gyroDx += (dx - gyroDx) * 0.1;
  gyroDy += (dy - gyroDy) * 0.1;

  requestTick();
}

function requestAccess() {
  // Check if iOS 13+ permission API exists
  if (typeof DeviceOrientationEvent !== 'undefined' && typeof DeviceOrientationEvent.requestPermission === 'function') {
    DeviceOrientationEvent.requestPermission()
      .then(state => {
        if (state === 'granted') {
          permissionGranted = true;
          window.addEventListener('deviceorientation', handleOrientation);
        }
      })
      .catch(e => console.error("Gyro error:", e));
  } else {
    // Android / Non-iOS
    permissionGranted = true;
    window.addEventListener('deviceorientation', handleOrientation);
  }
}

// --- INTERACTION ---

// Main Click/Tap Handler
card.addEventListener('click', (e) => {
  // 1. Try to enable gyro on first click (iOS req)
  if(!permissionGranted) requestAccess();
  
  // 2. Flip card
  rotated = !rotated;
  onLeave();
});

// Mouse/Touch Move
function onMove(e) {
  if (e.type === 'touchmove') e.preventDefault();
  
  isTouching = true; // Priority to touch
  const t = e.touches ? e.touches[0] : e;
  lastX = t.clientX;
  lastY = t.clientY;
  
  card.style.transition = 'none';
  requestTick();
}

function onLeave() {
  isTouching = false;
  // Use transition for smooth flip or return to flat
  card.style.transition = 'transform 0.5s cubic-bezier(0.23, 1, 0.32, 1)';
  
  // If no gyro, reset to flat. If gyro active, loop handles it.
  if(!permissionGranted) {
    card.style.transform = `rotateY(${rotated ? 180 : 0}deg) rotateX(0deg) rotateY(0deg)`;
    holoLayers.forEach(l => l.style.opacity = 0);
  }
}

function requestTick() {
  if (!isTicking) {
    requestAnimationFrame(updateAnimation);
    isTicking = true;
  }
}

function updateAnimation() {
  const rect = card.getBoundingClientRect();
  let dx, dy;

  // Touch overrides Gyro
  if (isTouching) {
    const cx = rect.left + rect.width / 2;
    const cy = rect.top + rect.height / 2;
    dx = (lastX - cx) / (rect.width / 2);
    dy = (lastY - cy) / (rect.height / 2);
  } else if (permissionGranted) {
    dx = gyroDx;
    dy = gyroDy;
    // Slight ease for gyro
    card.style.transition = 'transform 0.1s linear';
  } else {
    isTicking = false;
    return;
  }

  // Tilt Math
  const tiltX = -dy * maxTilt;
  const tiltY = dx * maxTilt;
  card.style.transform = `rotateY(${rotated ? 180 : 0}deg) rotateX(${tiltX}deg) rotateY(${tiltY}deg)`;

  // Holo Math
  const dist = Math.sqrt(dx*dx + dy*dy);
  const intensity = Math.min(dist, 1);

  holoLayers.forEach((layer) => {
    let depth = 2;
    if (layer.classList.contains('pattern-hex')) depth = 1.5;
    if (layer.classList.contains('pattern-text')) depth = 3;
    if (layer.classList.contains('holo-gradient')) depth = 5;

    const sx = dx * depth; 
    const sy = dy * depth;
    layer.style.transform = `translate(${-sx}%, ${-sy}%)`;
    
    if (layer.classList.contains('holo-gradient')) {
      layer.style.backgroundPosition = `${50 + sx * 4}% ${50 + sy * 4}%`;
      layer.style.opacity = intensity * 0.6;
    } else {
      layer.style.opacity = intensity * holoIntensity;
    }
  });

  isTicking = false;
  
  // Keep animating if gyro is active and not touching
  if(permissionGranted && !isTouching) {
     requestAnimationFrame(updateAnimation);
  }
}

// Listeners
card.addEventListener('mousemove', onMove);
card.addEventListener('touchmove', onMove, { passive: false });
card.addEventListener('mouseleave', onLeave);
card.addEventListener('touchend', onLeave);

// Attempt auto-start for Android/Desktop (might fail on some browsers without interaction)
requestAccess();
</script>
</body>
</html>