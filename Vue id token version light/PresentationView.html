<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="utf-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
  <title>NEXUS - Identity</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>

  <!-- ID CARD CONTAINER (No Wrapper) -->
  <div class="id-card-container">
    <!-- FRONT -->
    <div class="id-card-front">

      <div class="top-row">
        <div class="logo-area"><span class="company-name">ID Token</span></div>

      </div>

      <!-- PHOTO AREA -->
      <div class="photo-area">
        <img class="agent-photo" src="https://randomuser.me/api/portraits/women/44.jpg" alt="Agent Photo">
      </div>

      <!-- NAME (Moved OUT of details) -->
      <div class="name-text-wrapper">
        <h2 class="name">Sarah Connor Sarah Connor Sarah Connor Sarah Connor Sarah Connor Sarah Connor</h2>
      </div>

      <!-- DETAILS -->
      <div class="details">
        <span class="rank">ID Document data</span>
        <div class="data-grid">
          <div><span class="data-label">TYPE</span><span class="data-val">P</span></div>
          <div><span class="data-label">ISSUER</span><span class="data-val">USA</span></div>
          <div><span class="data-label">NATIONALITY</span><span class="data-val">American</span></div>
          <div><span class="data-label">GENDER</span><span class="data-val">F</span></div>
          <div><span class="data-label">BIRTH DATE</span><span class="data-val">12/2029</span></div>
          <div><span class="data-label">PLACE</span><span class="data-val">Chicago</span></div>
          <div><span class="data-label">ISSUED</span><span class="data-val">2022-12-31</span></div>
          <!-- USE ISO DATE FORMAT FOR JS COMPATIBILITY -->
          <div><span class="data-label">EXPIRES</span><span id="expiry-date" class="data-val">2020-12-22</span></div>
        </div>
      </div>

      <div class="bottom-id">&gt;&gt; 8473 9283 1102 &lt;&lt;</div>
    </div>
  </div>

  <script>
    // ==========================================
    // 1. HELPER FUNCTIONS
    // ==========================================

    function checkExpiration() {
      const expiryElement = document.getElementById('expiry-date');
      if (!expiryElement) return;
      // Parse text like "2026-12-22"
      const dateString = expiryElement.innerText.trim();
      const today = new Date();
      today.setHours(0, 0, 0, 0);

      if (today > new Date(dateString)) {
        document.documentElement.style.setProperty('--accent', '#ff0064');
        document.documentElement.style.setProperty('--primary', '#ff0064');
        const container = document.querySelector('.id-card-container');
        if (container) container.style.boxShadow = "0 15px 35px rgba(0, 0, 0, 0.6), 0 0 15px rgba(255, 0, 100, 0.5)";
      }
    }

    function adjustNameFontSize() {
      // Logic moved to CSS (Clamping), this just cleans inline styles
      const nameElement = document.querySelector('.name');
      if (!nameElement) return;
      nameElement.style.fontSize = '';
      nameElement.style.whiteSpace = '';
      nameElement.style.lineHeight = '';
    }

    // ==========================================
    // 2. MAIN INITIALIZATION (Wait for DOM)
    // ==========================================
    window.addEventListener('DOMContentLoaded', () => {
      checkExpiration();
      adjustNameFontSize();
    });

    // ==========================================
    // 3. GLOBAL WINDOW EVENTS
    // ==========================================
    let resizeTimer;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(adjustNameFontSize, 200);
    });

  </script>
</body>

</html>